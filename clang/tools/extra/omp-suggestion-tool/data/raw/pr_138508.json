{
    "number": 138508,
    "title": "[OpenMP] Use TLS for gtid on Solaris",
    "body": "When running the `openmp` testsuite on Solaris/amd64, many tests `FAIL` like\r\n\r\n```\r\n# | OMP: Error #11: Stack overflow detected for OpenMP thread #1\r\n```\r\n\r\nIn a `Debug` build, I also get\r\n```\r\n# | Assertion failure at kmp_runtime.cpp(203): __kmp_gtid_get_specific() < 0 || __kmp_gtid_get_specific() == i.\r\n```\r\n\r\nFurther investigation shows that just setting `__kmp_gtid_mode` to 3 massively reduces the number of failures.\r\n\r\nTested on `amd64-pc-solaris2.11` and `x86_64-pc-linux-gnu`.",
    "created_at": "2025-05-05T11:36:54Z",
    "merged_at": "2025-05-06T07:11:44Z",
    "user": "rorth",
    "files": [
        "openmp/runtime/src/kmp_global.cpp"
    ],
    "commits": [
        "[OpenMP] Use TLS for gtid on Solaris\n\nWhen running the `openmp` testsuite on Solaris/amd64, many tests `FAIL` like\n\n```\n# | OMP: Error #11: Stack overflow detected for OpenMP thread #1\n```\n\nIn a `Debug` build, I also get\n```\n# | Assertion failure at kmp_runtime.cpp(203): __kmp_gtid_get_specific() < 0 || __kmp_gtid_get_specific() == i.\n```\n\nFurther investigation shows that just setting `__kmp_gtid_mode` to 3\nmassively reduced the number of failures.\n\nTested on `amd64-pc-solaris2.11` and `x86_64-pc-linux-gnu`."
    ]
}