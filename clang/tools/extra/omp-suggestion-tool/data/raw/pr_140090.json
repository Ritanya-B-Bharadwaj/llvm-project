{
    "number": 140090,
    "title": "[mlir][OpenMP] Add translation of private_barrier attr to LLVMIR",
    "body": "Part of a series to fix https://github.com/llvm/llvm-project/issues/136357",
    "created_at": "2025-05-15T16:07:00Z",
    "merged_at": "2025-05-22T14:24:20Z",
    "user": "tblah",
    "files": [
        "mlir/include/mlir/Dialect/OpenMP/OpenMPClauses.td",
        "mlir/include/mlir/Dialect/OpenMP/OpenMPOps.td",
        "mlir/lib/Conversion/SCFToOpenMP/SCFToOpenMP.cpp",
        "mlir/lib/Dialect/OpenMP/IR/OpenMPDialect.cpp",
        "mlir/lib/Target/LLVMIR/Dialect/OpenMP/OpenMPToLLVMIRTranslation.cpp",
        "mlir/test/Dialect/OpenMP/ops.mlir",
        "mlir/test/Target/LLVMIR/openmp-wsloop-private.mlir"
    ],
    "commits": [
        "[mlir][OpenMP] add attribute for privatization barrier\n\nA barrier is needed at the end of initialization/copying of private\nvariables if any of those variables is lastprivate. This ensures that\nall firstprivate variables receive the original value of the variable\nbefore the lastprivate clause overwrites it.\n\nPreviously this barrier was added by the flang fontend, but there is not\na reliable way to put the barrier in the correct place for delayed\nprivatization, and the OpenMP dialect could some day have other users.\nIt is important that there are safe ways to use the constructs available\nin the dialect.\n\nlastprivate is currently not modelled in the OpenMP dialect, and so\nthere is no way to reliably determine whether there were lastprivate\nvariables. Therefore the frontend will have to provide this information\nthrough this new attribute.\n\nPart of a series of patches to fix\nhttps://github.com/llvm/llvm-project/issues/136357",
        "[mlir][OpenMP] Add translation of private_barrier attr to LLVMIR"
    ]
}