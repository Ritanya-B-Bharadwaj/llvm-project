{
    "number": 139961,
    "title": "[clang][OpenMP] Improve handling of non-C/C++ directives",
    "body": "The PR139793 added handling of the Fortran-only \"workshare\" directive, however there are more such directives, e.g. \"allocators\". Use the genDirectiveLanguages function to detect non-C/C++ directives instead of enumerating them.",
    "created_at": "2025-05-14T20:34:16Z",
    "merged_at": "2025-05-15T12:37:42Z",
    "user": "kparzysz",
    "files": [
        "clang/lib/Parse/ParseOpenMP.cpp",
        "clang/test/OpenMP/openmp_non_c_directives.c",
        "clang/test/OpenMP/openmp_workshare.c",
        "llvm/include/llvm/ADT/BitmaskEnum.h",
        "llvm/include/llvm/Frontend/Directive/DirectiveBase.td",
        "llvm/include/llvm/Frontend/OpenMP/OMP.td",
        "llvm/include/llvm/TableGen/DirectiveEmitter.h",
        "llvm/test/TableGen/directive1.td",
        "llvm/test/TableGen/directive2.td",
        "llvm/unittests/ADT/BitmaskEnumTest.cpp",
        "llvm/utils/TableGen/Basic/DirectiveEmitter.cpp"
    ],
    "commits": [
        "[ADT] Add operator! to BitmaskEnum\n\nAdd a logical (boolean) \"not\" operator.",
        "[llvm][OpenMP] Add \"SourceLanguages\" property to Directive\n\nThe official languages that OpenMP recognizes are C/C++ and Fortran.\nSome OpenMP directives are language-specific, some are C/C++-only,\nsome are Fortran-only.\n\nAdd a property to the TableGen definition of Directive that will be the\nlist of languages that allow the directive.\n\nThe TableGen backend will then generate a bitmask-like enumeration\nSourceLanguages, and a function\n  SourceLanguages getDirectiveLanguages(Directive D);",
        "[clang][OpenMP] Improve handling of non-C/C++ directives\n\nThe PR139793 added handling of the Fortran-only \"workshare\" directive,\nhowever there are more such directives, e.g. \"allocators\". Use the\ngenDirectiveLanguages function to detect non-C/C++ directives instead\nof enumerating them."
    ]
}