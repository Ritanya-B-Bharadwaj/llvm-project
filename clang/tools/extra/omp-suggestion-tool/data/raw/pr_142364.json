{
    "number": 142364,
    "title": "[OpenMP][cmake] Add SPARC support",
    "body": "This patch adds SPARC infrastructure to the `openmp` `cmake` files, matching what is done for other architectures. \r\n\r\nTested on `sparc-sun-solaris2.11`, `sparcv9-sun-solaris2.11`, `sparc-unknown-linux-gnu`, `sparc64-unknown-linux-gnu`, `i386-pc-solaris2.11`, `amd64-pc-solaris2.11`, `i686-pc-linux-gnu`, and `x86_64-pc-linux-gnu`.",
    "created_at": "2025-06-02T11:23:12Z",
    "merged_at": "2025-06-07T07:55:05Z",
    "user": "rorth",
    "files": [
        "openmp/runtime/CMakeLists.txt",
        "openmp/runtime/cmake/LibompUtils.cmake"
    ],
    "commits": [
        "[OpenMP][cmake] Add SPARC support\n\nLinking `libomp.so` on 32-bit SPARC `FAIL`s with\n```\nld: fatal: file projects/openmp/runtime/src/CMakeFiles/omp.dir/z_Linux_asm.S.o: wrong ELF class: ELFCLASS64\n```\nThis was a 1-stage build with a 64-bit-default `gcc`.  Unlike the C++\nsources, which were compiled as 32-bit objects due to the use of\n`-DCMAKE_CXX_FLAGS=-m32`, the assembler sources were not.\n\nThis patch adds SPARC infrastructure to the `openmp` `cmake` files,\nmatching what is done for other architectures.  Simultaneously it\nsimplifies passing `-m32`: instead of doing it per architecture, `-m32` is\nnow always passed when the target uses 32-bit pointers and supports the\noption.\n\nTested on `sparc-sun-solaris2.11`, `sparcv9-sun-solaris2.11`,\n`sparc-unknown-linux-gnu`, `sparc64-unknown-linux-gnu`,\n`i386-pc-solaris2.11`, `amd64-pc-solaris2.11`, `i686-pc-linux-gnu`, and\n`x86_64-pc-linux-gnu`.",
        "Split off `-m32` handling to new PR #142742."
    ]
}